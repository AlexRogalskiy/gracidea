<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gracidea | Pokémon Live Map</title>
  <meta name="author" content="lowlighter">
  <meta name="description" content="Gracidea, a Pokémon live map">
  <meta property="og:image" content="/opengraph.png">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/styles.css?commit=45d81d702c3c4459e879e308c3ccef54df2f0760">
</head>
<body>

  <div class="loader">
    <div class="loaded">
      <span></span>
    </div>
  </div>

  <div id="location">
    <div class="position"></div>
    <div class="name"></div>
  </div>

  <nav>
    <button data-control-for="map">MAP</button>
    <button data-control-for="debug">DEBUG</button>
    <a href="https://github.com/lowlighter/gracidea" target="_blank" rel="noopener">GITHUB</a>
  </nav>

  <nav class="debug">
    <button data-control-for="fps"></button>
  </nav>

  <template id="commit">45d81d702c3c4459e879e308c3ccef54df2f0760</template>

  <script>
    {
      const loader = document.querySelector(".loader .loaded")
      window.onerror = function (error) {
        loader.innerHTML = `<span style="color: red">${error}</span>${loader.innerHTML}`
      }
      window.onload = function () {
        const compat = (navigator.userAgent.includes("Safari"))&&(!navigator.userAgent.includes("Chrome"))
          loader.innerHTML = `<span>loading gracidea<span class="loading"></span></span><span>at commit ${"45d81d702c3c4459e879e308c3ccef54df2f0760".substring(0, 7)}</span>${loader.innerHTML}`
        if (compat)
            loader.innerHTML = `<span style="color: orange">using compat mode because of non-standard browser</span>${loader.innerHTML}`
        const script = document.createElement("script")
        script.setAttribute("type", "module")
        script.setAttribute("src", `/js/app.${compat ? "compat" : "min"}.js?commit=45d81d702c3c4459e879e308c3ccef54df2f0760`)
        document.querySelector("body").append(script)
      }
    }
  </script>

</body>
</html>