name: Gracidea
author: lowlighter
repository: https://github.com/lowlighter/gracidea
scripts:

  start:
    desc: Run app
    cmd: deno run --unstable --allow-net --allow-read server/app.ts

  build:
    desc: Build app
    cmd:
      - npm install pixi.js terser
      - deno run --allow-all build/mod.ts
      - deno bundle client/app/mod.ts client/static/js/app.js
      - npx terser client/static/js/app.js --mangle --ecma 2015 --source-map --output client/static/js/app.min.js

  lint:
    desc:
    cmd: deno lint --unstable --ignore=node_modules,client/static/js/app.js

  test:
    desc: Run tests
    cmd:
      - deno test --unstable --allow-read tests
      - deployctl check deploy/mod.ts
      # dprint check --config .github/config/dprint.json